# Environment configuration for Priory SmartShift
# Copy this file to `.env` and populate the values with your credentials.

# Twilio credentials for sending WhatsApp messages
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
# Your Twilio Sandbox or production WhatsApp number in international format (e.g., whatsapp:+14155238886)
TWILIO_WHATSAPP_NUMBER=

# OpenAI API key for wellbeing analysis
OPENAI_API_KEY=

# Secret key used to sign JSON Web Tokens.  Change this to a
# sufficiently random string in production.
JWT_SECRET=

# Interval for the AI wellbeing summary generator.  The default
# implementation triggers summarisation on demand via an endpoint, but
# you can configure a cron interval (e.g. "24h") for automatic runs.
CRON_INTERVAL=24h

# Payroll configuration
# Length of a pay period in days (e.g. 30 for monthly)
PAY_PERIOD_DAYS=30
# Default hourly rate for staff if not otherwise specified
# Default hourly rate for payroll calculations.  Standard shift duration is
# 12 hours including a 1 hour unpaid break (11 paid hours).  The hourly
# base rate is £12.10.
BASE_RATE_DEFAULT=12.10
# Multiplier applied to overtime hours (e.g. 1.5 for time-and-a-half)
OVERTIME_MULTIPLIER=1.5

# AI model designation for payroll summaries
AI_MODEL=gpt-4o-mini

# Predictive analytics configuration
# How often to refresh the analytics snapshots.  This cron expression
# uses standard cron syntax (minute hour day month day‑of‑week).  The
# default "0 5 * * *" means every day at 05:00.  The built‑in
# implementation will schedule a daily job, but external schedulers
# should use this value.
ANALYTICS_REFRESH_CRON="0 5 * * *"
# Base URL for an external ML service.  If provided, the server may
# delegate predictive modelling to this service.  In this demo
# implementation it is unused and can be left blank to use the
# internal heuristic models.
ML_SERVICE_URL=
# Number of days over which to forecast open shifts and costs.  Used
# by the /api/{orgId}/ai/predict endpoint when the `window` query
# parameter is not provided.
PREDICTION_WINDOW_DAYS=7

# Email and reporting
# API key for SendGrid (or another email provider).  Used to email
# compliance reports to organisation admins and managers.
SENDGRID_API_KEY=

# Base URL for storing generated report files (e.g. S3 or Supabase
# bucket).  Currently unused; reports are written to the local
# `reports` directory.
REPORT_STORAGE_BUCKET_URL=

# Cron expressions for scheduled report generation.  These are
# examples using standard cron syntax (minute hour day month day‑of‑week).
CRON_WEEKLY="0 7 * * 1"      # every Monday at 07:00
CRON_MONTHLY="0 8 1 * *"     # first day of month at 08:00

# Path to the compliance threshold JSON file.  This file defines
# CQC/NHS staffing standards and is used to highlight non‑compliance in
# reports.
COMPLIANCE_THRESHOLD_FILE=./config/standards.json

# Base64 encoded assistant instructions (optional).  Leave blank to use the default
# tone analysis prompt in the code.
OPENAI_TONE_PROMPT=

# URL to your PostgreSQL or Supabase database.  Not used in this demo
# implementation but provided for consistency with the specification.
DATABASE_URL=

# Port to run the HTTP server on
PORT=3000

# --- Multi‑Tenant and Billing Configuration ---
# Enable multi‑tenant mode.  When true, the API will expect
# organisation‑scoped routes (e.g. /api/{orgId}/shifts) and JWT tokens will
# include an organisation_id field.  The frontend will derive the
# organisation subdomain from the browser's hostname.
MULTI_TENANT=true

# Base domain used for subdomain routing (e.g. smartshift.app).  This
# informs the frontend and server how to build and parse subdomains.
BASE_DOMAIN=smartshift.app

# Stripe API keys (to be used in future phases for billing).  These
# values are placeholders and are not used in the current version.
STRIPE_PUBLIC_KEY=
STRIPE_SECRET_KEY=